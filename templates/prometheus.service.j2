{{ '## ' + 'prometheus.conf' }}
{{ '# ' + ansible_managed }}
{{ '# ' + 'Do not edit manually' }}

{% for o in vars['prometheus_service_settings'] %}
{% if loop.first %}
{{ '[Service]' }}
{{ 'ExecStart' + '=' }}
{{ 'ExecStart' + '=' + hostvars[inventory_hostname]['prometheus_bin'] + ' \\' }}
{% endif %}
{% if o.config_file is defined and o.config_file != '' %}
{{ '--config.file' ~ '=' ~ '\"' ~ o.config_file ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_listen_address is defined and o.web_listen_address != '' %}
{{ '--web.listen-address' ~ '=' ~ '\"' ~ o.web_listen_address ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_read_timeout is defined and o.web_read_timeout != '' %}
{{ '--web.read-timeout' ~ '=' ~ o.web_read_timeout ~ ' \\' }}
{% endif %}
{% if o.web_max_connections is defined and o.web_max_connections != '' %}
{{ '--web.max-connections' ~ '=' ~ o.web_max_connections ~ ' \\' }}
{% endif %}
{% if o.web_external_url is defined and o.web_external_url != '' %}
{{ '--web.external-url' ~ '=' ~ '\"' ~ o.web_external_url ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_route_prefix is defined and o.web_route_prefix != '' %}
{{ '--web.route-prefix' ~ '=' ~ '\"' ~ o.web_route_prefix ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_user_assets is defined and o.web_user_assets != '' %}
{{ '--web.user-assets' ~ '=' ~ '\"' ~ o.web_user_assets ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_enable_lifecycle is defined and o.web_enable_lifecycle == 'true' %}
{{ '--web.enable-lifecycle' + ' \\' }}
{% endif %}
{% if o.web_enable_admin_api is defined and o.web_enable_admin_api == 'true' %}
{{ '--web.enable-admin-api' + ' \\' }}
{% endif %}
{% if o.web_console_templates is defined and o.web_console_templates != '' %}
{{ '--web.console.templates' ~ '=' ~ '\"' ~
   o.web_console_templates ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.web_console_libraries is defined and o.web_console_libraries != '' %}
{{ '--web.console.libraries' ~ '=' ~ '\"' ~
   o.web_console_libraries ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.storage_tsdb_path is defined and o.storage_tsdb_path != '' %}
{{ '--storage.tsdb.path' ~ '=' ~ '\"' ~ o.storage_tsdb_path ~ '\"' ~ ' \\' }}
{% endif %}
{% if o.storage_tsdb_retention is defined and
      o.storage_tsdb_retention != '' %}
{{ '--storage.tsdb.retention' ~ '=' ~ o.storage_tsdb_retention ~ ' \\' }}
{% endif %}
{% if o.storage_tsdb_no_lockfile is defined and
      o.storage_tsdb_no_lockfile == 'true' %}
{{ '--storage.tsdb.no-lockfile' + ' \\' }}
{% endif %}
{% if o.storage_remote_flush_deadline is defined and
      o.storage_remote_flush_deadline != '' %}
{{ '--storage.remote.flush-deadline' ~ '=' ~
   o.storage_remote_flush_deadline ~ ' \\' }}
{% endif %}
{% if o.alertmanager_notification_queue_capacity is defined and
      o.alertmanager_notification_queue_capacity != '' %}
{{ '--alertmanager.notification-queue-capacity' ~ '=' ~
   o.alertmanager_notification_queue_capacity ~ ' \\' }}
{% endif %}
{% if o.alertmanager_timeout is defined and o.alertmanager_timeout != '' %}
{{ '--alertmanager.timeout' ~ '=' ~ o.alertmanager_timeout ~ ' \\' }}
{% endif %}
{% if o.query_lookback_delta is defined and o.query_lookback_delta != '' %}
{{ '--query.lookback-delta' ~ '=' ~ o.query_lookback_delta ~ ' \\' }}
{% endif %}
{% if o.query_timeout is defined and o.query_timeout != '' %}
{{ '--query.timeout' ~ '=' ~ o.query_timeout ~ ' \\' }}
{% endif %}
{% if o.query_max_concurrency is defined and o.query_max_concurrency != '' %}
{{ '--query.max-concurrency' ~ '=' ~ o.query_max_concurrency ~ ' \\' }}
{% endif %}
{% if o.log_level is defined and o.log_level in
      ['debug', 'info', 'warn', 'error'] %}
{{ '--log.level' ~ '=' ~ o.log_level ~ ' \\' }}
{% endif %}
{% endfor %}
